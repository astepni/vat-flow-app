{% extends "base.html" %}
{% block title %}Lista dokumentÃ³w ksiÄ™gowych - VAT Flow{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-10">
    <div class="text-center mb-4">
      <h2 class="fw-bold">ðŸ“‘ Lista dokumentÃ³w ksiÄ™gowych</h2>
      <p class="text-muted">PrzeglÄ…daj swoje faktury przychodowe i dokumenty ksiÄ™gowe kosztowe w jednym miejscu.</p>
    </div>
    <div class="row g-4">
      <!-- Sales invoices -->
      <div class="col-md-6">
        <div class="card shadow-sm border-0 rounded-4 h-100">
          <div class="card-header bg-success text-white rounded-top-4">
            <h5 class="mb-0">Faktury przychodowe</h5>
          </div>
          <ul class="list-group list-group-flush">
            {% for invoice in invoices %}
              {% if invoice.invoice_type == 'income' %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <a href="{{ invoice.pdf.url }}" class="fw-semibold text-decoration-none">
                    {{ invoice.pdf.name }}
                  </a>
                  <div class="text-muted small">Dodano: {{ invoice.uploaded_at }}</div>
                </div>
                <div>
                  <form method="post" action="{% url 'vat_simulation:zatwierdz_fakture' invoice.pk %}" style="display:inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-success btn-sm rounded-pill">
                      ZatwierdÅº do rejestru
                    </button>
                  </form>
                  <form method="post" action="{% url 'delete_invoice' invoice.pk %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-danger btn-sm rounded-pill">UsuÅ„</button>
                  </form>
                </div>
              </li>
              {% endif %}
            {% empty %}
              <li class="list-group-item text-muted">Brak faktur przychodowych</li>
            {% endfor %}
          </ul>
        </div>
      </div>

      <!-- Purchase invoices -->
      <div class="col-md-6">
        <div class="card shadow-sm border-0 rounded-4 h-100">
          <div class="card-header bg-primary text-white rounded-top-4">
            <h5 class="mb-0">Dokumenty ksiÄ™gowe kosztowe</h5>
          </div>
          <ul class="list-group list-group-flush">
            {% for invoice in invoices %}
              {% if invoice.invoice_type == 'expense' %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <a href="{{ invoice.pdf.url }}" class="fw-semibold text-decoration-none">
                    {{ invoice.pdf.name }}
                  </a>
                  <div class="text-muted small">Dodano: {{ invoice.uploaded_at }}</div>
                </div>
                <div>
                  <form method="post" action="{% url 'vat_simulation:zatwierdz_fakture' invoice.pk %}" style="display:inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-success btn-sm rounded-pill">
                      ZatwierdÅº do rejestru
                    </button>
                  </form>
                  <form method="post" action="{% url 'delete_invoice' invoice.pk %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-danger btn-sm rounded-pill">UsuÅ„</button>
                  </form>
                </div>
              </li>
              {% endif %}
            {% empty %}
              <li class="list-group-item text-muted">Brak dokumentÃ³w ksiÄ™gowych kosztowych</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
